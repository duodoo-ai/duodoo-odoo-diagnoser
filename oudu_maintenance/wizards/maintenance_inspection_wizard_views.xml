<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <!-- 修改客户端动作定义 -->
    <record id="action_scan_barcode" model="ir.actions.client">
        <field name="name">Device scan code</field>
        <field name="tag">action_scan_barcode</field>  <!-- 修改tag字段 -->
        <field name="params">{'route': '/barcode/inspection'}</field>
    </record>

    <!-- 向导视图 -->
    <record id="inspection_wizard_form" model="ir.ui.view">
        <field name="name">inspection.wizard.form</field>
        <field name="model">maintenance.inspection.wizard</field>
        <field name="arch" type="xml">
            <form class="o_kanban_mobile">
                <sheet>
                    <header>
                        <button name="scan_barcode"
                                string="Scan Code Inspection"
                                type="object"
                                class="btn-primary oe_highlight"
                                icon="fa-barcode"/>
                    </header>
                    <div class="oe_title">
                        <h1>Equipment Inspection</h1>
                    </div>
                    <group>
                        <field name="equipment_barcode_id"
                               widget="selection"
                               options="{'no_create': True}"/>
                        <field name="equipment_id" readonly="1"/>
                        <field name="inspection_result" widget="radio" options="{'horizontal': true}"/>
                        <field name="notes" placeholder="Enter inspection notes..."/>
                        <field name="photo" widget="image" class="oe_avatar"/>
                    </group>
                    <footer>
                        <button name="action_create_inspection"
                                string="Submit"
                                class="btn-primary"
                                type="object"/>
                        <button string="Cancel"
                                class="btn-secondary"
                                special="cancel"/>
                    </footer>
                </sheet>
            </form>
        </field>
    </record>

    <!-- 动作和菜单 -->
    <record id="action_start_inspection" model="ir.actions.act_window">
        <field name="name">Equipment Inspection</field>
        <field name="res_model">maintenance.inspection.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
    </record>
</odoo>


<!--使用流程：-->

<!--扫描设备二维码 → 自动打开向导-->
<!--填写检查结果 → 上传现场照片-->
<!--提交生成正式检查记录-->
<!--在看板视图中查看历史记录（绿色表示通过，红色表示不通过）-->